{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/Users/nicholasbrown/Source/openlaw/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport MainLayout from \"../layouts/MainLayout\";\nimport Link from \"next/link\";\nimport fetch from \"isomorphic-unfetch\";\nimport styled from \"styled-components\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport moment from \"moment\";\nimport { ContentContainer, Row } from \"../components\";\nimport { getProposals, PROPOSALS_QUERY } from \"../queries\";\nconst SubNav = styled.div.withConfig({\n  displayName: \"pages__SubNav\",\n  componentId: \"kbnfey-0\"\n})([\"display:flex;justify-content:space-between;align-items:center;height:100px;\"]);\nconst Title = styled.h1.withConfig({\n  displayName: \"pages__Title\",\n  componentId: \"kbnfey-1\"\n})([\"line-height:1;margin:0;\"]);\nconst CreateButton = styled.a.withConfig({\n  displayName: \"pages__CreateButton\",\n  componentId: \"kbnfey-2\"\n})([\"border:none;background:#372237;border-radius:2px;color:white;font-size:18px;padding:12px;text-decoration:none;&:hover{cursor:pointer;}\"]);\n\nfunction Index({\n  proposals\n}) {\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(PROPOSALS_QUERY);\n\n  if (error) {\n    return __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, \"Error: \", _JSON$stringify(error));\n  }\n\n  console.log(data);\n  return __jsx(MainLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, __jsx(ContentContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, __jsx(SubNav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, __jsx(Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Home\"), __jsx(Link, {\n    href: \"/new\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, __jsx(CreateButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"New proposal\"))), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, !loading && data && data.proposals.map(proposal => __jsx(Row, {\n    key: proposal.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: `/p/${proposal.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, proposal.title)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Updated \", moment.unix(proposal.updatedAt / 1000).fromNow()))))));\n}\n\nIndex.getInitialProps = async function () {\n  const proposals = await getProposals();\n  return {\n    proposals\n  };\n};\n\nexport default Index;","map":{"version":3,"sources":["/Users/nicholasbrown/Source/openlaw/pages/index.js"],"names":["MainLayout","Link","fetch","styled","useQuery","moment","ContentContainer","Row","getProposals","PROPOSALS_QUERY","SubNav","div","Title","h1","CreateButton","a","Index","proposals","data","loading","error","console","log","map","proposal","id","slug","title","unix","updatedAt","fromNow","getInitialProps"],"mappings":";;;;AAAA,OAAOA,UAAP,MAAuB,uBAAvB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,MAAP,MAAmB,QAAnB;SAESC,gB,EAAkBC,G;AAC3B,SAASC,YAAT,EAAuBC,eAAvB,QAA8C,YAA9C;AAEA,MAAMC,MAAM,GAAGP,MAAM,CAACQ,GAAV;AAAA;AAAA;AAAA,mFAAZ;AAOA,MAAMC,KAAK,GAAGT,MAAM,CAACU,EAAV;AAAA;AAAA;AAAA,+BAAX;AAKA,MAAMC,YAAY,GAAGX,MAAM,CAACY,CAAV;AAAA;AAAA;AAAA,8IAAlB;;AAaA,SAASC,KAAT,CAAe;AAAEC,EAAAA;AAAF,CAAf,EAA8B;AAC5B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAA2BhB,QAAQ,CAACK,eAAD,CAAzC;;AAEA,MAAIW,KAAJ,EAAW;AACT,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAW,gBAAeA,KAAf,CAAX,CAAP;AACD;;AAEDC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AAEA,SACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAEE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CAFF,CADF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACC,OAAD,IACCD,IADD,IAECA,IAAI,CAACD,SAAL,CAAeM,GAAf,CAAmBC,QAAQ,IACzB,MAAC,GAAD;AAAK,IAAA,GAAG,EAAEA,QAAQ,CAACC,EAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAG,MAAKD,QAAQ,CAACE,IAAK,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIF,QAAQ,CAACG,KAAb,CADF,CADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACWtB,MAAM,CAACuB,IAAP,CAAYJ,QAAQ,CAACK,SAAT,GAAqB,IAAjC,EAAuCC,OAAvC,EADX,CAJF,CADF,CAHJ,CAPF,CADF,CADF;AA0BD;;AAEDd,KAAK,CAACe,eAAN,GAAwB,kBAAiB;AACvC,QAAMd,SAAS,GAAG,MAAMT,YAAY,EAApC;AACA,SAAO;AAAES,IAAAA;AAAF,GAAP;AACD,CAHD;;AAKA,eAAeD,KAAf","sourcesContent":["import MainLayout from \"../layouts/MainLayout\";\nimport Link from \"next/link\";\nimport fetch from \"isomorphic-unfetch\";\nimport styled from \"styled-components\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport moment from \"moment\";\n\nimport { ContentContainer, Row } from \"components\";\nimport { getProposals, PROPOSALS_QUERY } from \"../queries\";\n\nconst SubNav = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 100px;\n`;\n\nconst Title = styled.h1`\n  line-height: 1;\n  margin: 0;\n`;\n\nconst CreateButton = styled.a`\n  border: none;\n  background: #372237;\n  border-radius: 2px;\n  color: white;\n  font-size: 18px;\n  padding: 12px;\n  text-decoration: none;\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nfunction Index({ proposals }) {\n  const { data, loading, error } = useQuery(PROPOSALS_QUERY);\n\n  if (error) {\n    return <p>Error: {JSON.stringify(error)}</p>;\n  }\n\n  console.log(data);\n\n  return (\n    <MainLayout>\n      <ContentContainer>\n        <SubNav>\n          <Title>Home</Title>\n          <Link href=\"/new\">\n            <CreateButton>New proposal</CreateButton>\n          </Link>\n        </SubNav>\n        <div>\n          {!loading &&\n            data &&\n            data.proposals.map(proposal => (\n              <Row key={proposal.id}>\n                <Link href={`/p/${proposal.slug}`}>\n                  <a>{proposal.title}</a>\n                </Link>\n                <div>\n                  Updated {moment.unix(proposal.updatedAt / 1000).fromNow()}\n                </div>\n              </Row>\n            ))}\n        </div>\n      </ContentContainer>\n    </MainLayout>\n  );\n}\n\nIndex.getInitialProps = async function() {\n  const proposals = await getProposals();\n  return { proposals };\n};\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}