{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/Users/nicholasbrown/Source/openlaw/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport MainLayout from \"../layouts/MainLayout\";\nimport Link from \"next/link\";\nimport fetch from \"isomorphic-unfetch\";\nimport styled from \"styled-components\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { ContentContainer } from \"../components\";\nimport { getProposals, PROPOSALS_QUERY } from \"../queries\";\nvar SubNav = styled.div.withConfig({\n  displayName: \"pages__SubNav\",\n  componentId: \"kbnfey-0\"\n})([\"display:flex;justify-content:space-between;align-items:center;height:100px;\"]);\nvar Title = styled.h1.withConfig({\n  displayName: \"pages__Title\",\n  componentId: \"kbnfey-1\"\n})([\"line-height:1;margin:0;\"]);\nvar CreateButton = styled.a.withConfig({\n  displayName: \"pages__CreateButton\",\n  componentId: \"kbnfey-2\"\n})([\"border:none;background:#372237;border-radius:2px;color:white;font-size:18px;padding:20px;text-decoration:none;&:hover{cursor:pointer;}\"]);\n\nfunction Index(_ref) {\n  var proposals = _ref.proposals;\n\n  var _useQuery = useQuery(PROPOSALS_QUERY),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error;\n\n  if (error) {\n    return __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, \"Error: \", _JSON$stringify(error));\n  }\n\n  return __jsx(MainLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, __jsx(ContentContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, __jsx(SubNav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, __jsx(Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Home\"), __jsx(Link, {\n    href: \"/new\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, __jsx(CreateButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"New proposal\"))), !loading && data && data.proposals.map(function (proposal) {\n    return __jsx(\"div\", {\n      key: proposal.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, __jsx(Link, {\n      href: \"/p/\".concat(proposal.slug),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, proposal.title)));\n  })));\n}\n\nIndex.getInitialProps = function _callee() {\n  var proposals;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(getProposals());\n\n        case 2:\n          proposals = _context.sent;\n          return _context.abrupt(\"return\", {\n            proposals: proposals\n          });\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default Index;","map":{"version":3,"sources":["/Users/nicholasbrown/Source/openlaw/pages/index.js"],"names":["MainLayout","Link","fetch","styled","useQuery","ContentContainer","getProposals","PROPOSALS_QUERY","SubNav","div","Title","h1","CreateButton","a","Index","proposals","data","loading","error","map","proposal","id","slug","title","getInitialProps"],"mappings":";;;;;AAAA,OAAOA,UAAP,MAAuB,uBAAvB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,QAAT,QAAyB,qBAAzB;SAESC,gB;AACT,SAASC,YAAT,EAAuBC,eAAvB,QAA8C,YAA9C;AAEA,IAAMC,MAAM,GAAGL,MAAM,CAACM,GAAV;AAAA;AAAA;AAAA,mFAAZ;AAOA,IAAMC,KAAK,GAAGP,MAAM,CAACQ,EAAV;AAAA;AAAA;AAAA,+BAAX;AAKA,IAAMC,YAAY,GAAGT,MAAM,CAACU,CAAV;AAAA;AAAA;AAAA,8IAAlB;;AAaA,SAASC,KAAT,OAA8B;AAAA,MAAbC,SAAa,QAAbA,SAAa;;AAAA,kBACKX,QAAQ,CAACG,eAAD,CADb;AAAA,MACpBS,IADoB,aACpBA,IADoB;AAAA,MACdC,OADc,aACdA,OADc;AAAA,MACLC,KADK,aACLA,KADK;;AAG5B,MAAIA,KAAJ,EAAW;AACT,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAW,gBAAeA,KAAf,CAAX,CAAP;AACD;;AAED,SACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAEE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CAFF,CADF,EAOG,CAACD,OAAD,IACCD,IADD,IAECA,IAAI,CAACD,SAAL,CAAeI,GAAf,CAAmB,UAAAC,QAAQ;AAAA,WACzB;AAAK,MAAA,GAAG,EAAEA,QAAQ,CAACC,EAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAM,MAAA,IAAI,eAAQD,QAAQ,CAACE,IAAjB,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIF,QAAQ,CAACG,KAAb,CADF,CADF,CADyB;AAAA,GAA3B,CATJ,CADF,CADF;AAqBD;;AAEDT,KAAK,CAACU,eAAN,GAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACElB,YAAY,EADd;;AAAA;AAChBS,UAAAA,SADgB;AAAA,2CAEf;AAAEA,YAAAA,SAAS,EAATA;AAAF,WAFe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;;AAKA,eAAeD,KAAf","sourcesContent":["import MainLayout from \"../layouts/MainLayout\";\nimport Link from \"next/link\";\nimport fetch from \"isomorphic-unfetch\";\nimport styled from \"styled-components\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\nimport { ContentContainer } from \"components\";\nimport { getProposals, PROPOSALS_QUERY } from \"../queries\";\n\nconst SubNav = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 100px;\n`;\n\nconst Title = styled.h1`\n  line-height: 1;\n  margin: 0;\n`;\n\nconst CreateButton = styled.a`\n  border: none;\n  background: #372237;\n  border-radius: 2px;\n  color: white;\n  font-size: 18px;\n  padding: 20px;\n  text-decoration: none;\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nfunction Index({ proposals }) {\n  const { data, loading, error } = useQuery(PROPOSALS_QUERY);\n\n  if (error) {\n    return <p>Error: {JSON.stringify(error)}</p>;\n  }\n\n  return (\n    <MainLayout>\n      <ContentContainer>\n        <SubNav>\n          <Title>Home</Title>\n          <Link href=\"/new\">\n            <CreateButton>New proposal</CreateButton>\n          </Link>\n        </SubNav>\n        {!loading &&\n          data &&\n          data.proposals.map(proposal => (\n            <div key={proposal.id}>\n              <Link href={`/p/${proposal.slug}`}>\n                <a>{proposal.title}</a>\n              </Link>\n            </div>\n          ))}\n      </ContentContainer>\n    </MainLayout>\n  );\n}\n\nIndex.getInitialProps = async function() {\n  const proposals = await getProposals();\n  return { proposals };\n};\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}