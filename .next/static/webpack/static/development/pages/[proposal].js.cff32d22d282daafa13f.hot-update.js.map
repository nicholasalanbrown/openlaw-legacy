{"version":3,"file":"static/webpack/static/development/pages/[proposal].js.cff32d22d282daafa13f.hot-update.js","sources":["webpack:///./components/ProposalPage.js"],"sourcesContent":["import fetch from \"isomorphic-unfetch\";\nimport styled from \"styled-components\";\nimport MeactMarkdown from \"react-markdown\";\nimport { useRouter } from \"next/router\";\n\nimport MainLayout from \"../layouts/MainLayout\";\nimport { ContentContainer } from \"components\";\nimport {\n  getProposalBranches,\n  getProposalMetadata,\n  getProposalSummary,\n  getProposalLegal\n} from \"../queries\";\nimport ReactMarkdown from \"react-markdown\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Containter = styled.div`\n  font-size: 18px;\n  line-height: 1.4;\n  max-width: 900px;\n  padding: 60px 20px 0;\n`;\n\nfunction Proposal({ branches, currentBranch, metadata, summary, legal }) {\n  const router = useRouter();\n\n  const handleBranchSelect = e => {\n    const selectedBranch = e.target.value;\n    if (selectedBranch !== currentBranch) {\n      if (selectedBranch !== \"master\") {\n        router.push(`/hello/tree/${selectedBranch}`);\n      } else {\n        router.push(\"/hello\");\n      }\n    }\n  };\n\n  return (\n    <MainLayout>\n      <ContentContainer>\n        <select\n          onChange={e => handleBranchSelect(e)}\n          defaultValue={currentBranch || \"master\"}\n        >\n          {branches.map(branch => (\n            <option key={branch.name} value={branch.name}>\n              {branch.name}\n            </option>\n          ))}\n        </select>\n        <h1>{metadata.title}</h1>\n        <h2>{metadata.description}</h2>\n        <ReactMarkdown source={summary} />\n        <ReactMarkdown source={legal} />\n      </ContentContainer>\n    </MainLayout>\n  );\n}\n\nProposal.getInitialProps = async function(context) {\n  const allBranches = await getProposalBranches(1);\n  const branches = allBranches.filter(branch => branch.merged === false);\n  const currentBranch = context.query.branch || \"master\";\n  const metadata = await getProposalMetadata(1, currentBranch);\n  const summary = await getProposalSummary(1, currentBranch);\n  const legal = await getProposalLegal(1, currentBranch);\n  return { branches, currentBranch, metadata, summary, legal };\n};\n\nexport default Proposal;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAMA;AAEA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AACA;AADA;AAIA;AAJA;AAAA;AACA;AADA;AAKA;AALA;AAAA;AACA;AADA;AAMA;AANA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;;;;A","sourceRoot":""}